{% extends 'base.html' %}

{% block content %}
  <h2>{% if tag %}Posts tagged with "{{ tag.name }}"{% else %}All Posts{% endif %}</h2>
  <a href="{% url 'post-create' %}">Create New Post</a>
  <hr>
  {% for post in posts %}
    <article>
      <h3><a href="{% url 'post-detail' post.pk %}">{{ post.title }}</a></h3>
      <div class="tags">
        Tags:
        {% for tag in post.tags.all %}
          <a href="{% url 'tagged-post-list' tag.name %}">{{ tag.name }}</a>{% if not forloop.last %}, {% endif %}
        {% endfor %}
      </div>
      <p>{{ post.content|truncatewords:30 }}</p>
      <small>By {{ post.author.username }} on {{ post.published_date|date:"F d, Y" }}</small>
    </article>
    <hr>
  {% endfor %}
{% endblock %}
